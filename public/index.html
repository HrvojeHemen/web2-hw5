<!--index.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Accept-CH" content="Device-Memory">
    <title>Express.js on Vercel</title>

    <script>
        if ('storage' in navigator && 'estimate' in navigator.storage) {
            navigator.storage.estimate()
                .then(estimate => {
                    document.getElementById('usage').innerHTML = estimate.usage;
                    document.getElementById('quota').innerHTML = estimate.quota;
                    document.getElementById('percent').innerHTML = (estimate.usage * 100 / estimate.quota).toFixed(0);
                });
        }

        if ('storage' in navigator && 'persisted' in navigator.storage) {
            navigator.storage.persisted()
                .then(persisted => {
                    document.getElementById('persisted').innerHTML = persisted ? 'persisted' : 'not persisted';
                });
        }

        function requestPersistence() {
            if ('storage' in navigator && 'persist' in navigator.storage) {
                navigator.storage.persist()
                    .then(persisted => {
                        document.getElementById('persisted').innerHTML = persisted ? 'persisted' : 'not persisted';
                    });
            }
        }
    </script>
</head>
<body>
<h1>Express App Responded</h1>

<p>Estimated storage usage is <b id="usage">unknown</b> bytes.</p>
<p>Estimated storage quota is <b id="quota">unknown</b> bytes.</p>
<p>Estimated usage is <b id="percent">unknown</b>%.</p>
<p>Persistent storage status is <b id="persisted">unknown</b>.</p>
<p><button onclick="requestPersistence()">Request persistent storage</button></p>
</body>
</html>